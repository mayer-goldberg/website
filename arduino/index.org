#+title: Arduino Notes
#+author: Mayer Goldberg
#+options: creator:nil
#+keywords: Mayer Goldberg, Department of Computer Science, Ben-Gurion University, Arduino, AVR, C, C++, C/C++, embedded computers, embedded systems, microcomputers, threaded code

* Introduction

The point of this page is to list all the information & material I accumulated over the course of working with Arduino. Ideally, this would include code snippets for all the hardware I worked with, so that it would be easier to get started on new projects

* Software

1. The official Arduino software is located [[http://arduino.cc/][here]]. It consists of a Java application that includes a compiler for the Arduino platform, a simple IDE, and some functionality for transferring the compiled code to the Arduino board.
2. I'm using Mac OSX 10.6.8. The Arduino board was mis-identified as a

#+begin_example
FT232R USB UART:

  Product ID:	0x6001
  Vendor ID:	0x0403  (Future Technology Devices International Limited)
  Version:	 6.00
  Serial Number:	A1024896
  Speed:	Up to 12 Mb/sec
  Manufacturer:	FTDI
  Location ID:	0x1d100000 / 3
  Current Available (mA):	500
  Current Required (mA):	90
#+end_example

It turns out that I was missing an FTDI driver for emulating a COM port using a USB port. The drivers are available [[http://www.ftdichip.com/FTDrivers.htm][here]]. 


* Basic language reference

1. The official language reference is located [[http://arduino.cc/en/Reference/HomePage][here]]. This includes the basic functions that are available on any Arduino board.

2. Every C/C++ program for the Arduino includes two procedures: =void setup();= which runs once, upon startup, and =void loop();= which runs repeatedly.

* Hardware

** The AVR Microarchitecture

- The AVR microarchitecture is developed by the [[http://www.atmel.com/][Atmel]] corporation. All schematics & data sheets are available through their website.
- A tutorial on how to program the Arduino in assembly langauge, using the standard /gcc/ is available [[http://www.nongnu.org/avr-libc/user-manual/inline_asm.html][here]]. A post on the same subject can be found [[http://blog.threebytesfull.com/post/6475041619/arduino-avr-assembly-language][here]].

** [[http://dx.com/p/arduino-duemilanove-mega-avr-atmega1280-16au-usb-board-118042][Arduino Compatible Duemilanove Mega AVR ATmega1280-16AU USB Board]]

#+attr_html: :wrap
#+attr_html: :width 40%
[[file:./files/sku_118042_1.jpg]]


- 

** [[http://dx.com/p/lcd-keypad-shield-for-arduino-duemilanove-lcd-1602-118059][LCD Keypad Shield for Arduino Duemilanove & LCD 1602]]

#+attr_html: :wrap
#+attr_html: :width 40%
[[file:./files/sku_118059_1.jpg]]

*** Rationale for getting it

This is a simple display and some buttons. Enough to display output, read input from the buttons. Can be used to scroll through menu options, etc.

*** Programming the LCD Keypad

- [[http://www.dfrobot.com/wiki/index.php?title=Arduino_LCD_KeyPad_Shield_(SKU:_DFR0009)][Manufacturer & data]]
- It was kind of disappointing to learn that the LCD Keypad only permits 8 glyphs to be defined (0-7), so that the full range of Hebrew cannot be defined. Clearly, someone has already thought of this possibility, since the LiquidCrystal library supports writing in either /left-to-right/ or /right-to-left/, controllable via the =lcd.leftToRight();= and =lcd.rightToLeft();= commands.

#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/lcd-rtl.jpg]]

** [[http://dx.com/p/arduino-diy-part-buzzer-module-black-138322][Arduino Compatible Passive Speaker Buzzer Module - Black]]

#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_138322_1.jpg]]

- The buzzer comes with 3 pins, whereas most buzzers I see on various Arduino tutorials come with only two. I have no idea what the third pin is like. One of the pins is marked with a minus sign '*-*', so it is plugged into *GND* on the Arduino board. This makes the second (middle) pin fit into *13*, and the third pin fit into *12*. Attempts to use *13* failed. Attempts to use *12* succeeded beautifully.
- To operate the buzzer, the =void init();= function must contain an initialization to the buzzer output pin, which in this case is *12*. Ideally, this should be set using a C macro to abstract the number of the pin: =pinMode(BUZZER_OUTPUT, OUTPUT);=. The =void loop();= function should contain 

** [[http://dx.com/p/arduino-1-6-lcd-display-screen-for-nokia-5110-red-silver-140226][Arduino Compatible 1.6" LCD Nokia 5110 LCD Module with White Backlit - Red + Silver]]
#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_140226_1.jpg]]

- Spec & technical details are [[https://www.sparkfun.com/products/10168][here]].

** [[http://dx.com/p/mcu-extension-4-x-4-16-key-matrix-keyboard-module-for-arduino-green-147734][MCU Extension 4 x 4 16-Key Matrix Keyboard Module for Arduino - Green]]
#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_147734_1.jpg]]

** [[http://dx.com/p/sd-card-reading-writing-module-for-arduino-148784][SD Card Reading Writing Module for Arduino]]
#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_148784_1.jpg]]

*** Rationale for getting it

The SD card is an inexpensive (US$2.70) way of storing information for or by the Arduino. This memory is non-volatile, and the API for the SD card comes with functions for creating directories, reading, writing, and deleting files, etc.

Because memory is scarce on the Arduino, large amounts of data, structured or unstructured, can be stored on an SD card and used by Arduino programs. 

For /threaded code/, this offers a simple and effective way to store code & data, so that the only native code need be the /address interpreter/. The /control stack/, the /data stack/, the /dictionary/, etc, can all reside as files on the SD card, and accessed via random-access IO operations.

** [[http://dx.com/p/ds1302-real-time-clock-module-with-battery-cr2032-126453][DS1302 Real Time Clock Module with Battery CR2032]]

#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_126453_2.jpg]]

*** Rationale for getting it

The Arduino does not come with a built-in, real-time clock (!). This means that it cannot tell time. For any project that requires keeping time (alarm clock, etc) you want to get a real time clock shield. The beauty of this unit is that it has a very simple API for setting & getting the time, and the battery will let it keep the time for several years, independently of the power supply to the main board.

** [[http://dx.com/p/5v-3-2-lcd12864-screen-module-with-backlit-yellow-green-screen-english-word-stock-121820][5V 3.2" LCD12864 Screen Module with Backlit (Yellow & Green Screen/English Word Stock)]]
#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/sku_121820_1.jpg]]

** TM1638 LED Button(8-Bit Digital Tube+8 LED+8 Key) For Arduino ARM STM32 A104
#+attr_html: wrap
#+attr_html: :width 40%
[[file:./files/led-shield.jpg]]

- Specs in English can be found [[http://tronixstuff.wordpress.com/2012/03/11/arduino-and-tm1638-led-display-modules/][here]].

** Cables, Connectors, etc.

The wires that are used to connect pins on PCB are called /Dupont jumper wires/. The pins are called /pin headers/. 

- General: [[http://dx.com/s/electronic%2bpins.html?category=410&PageSize=60][Pins]]
- [[http://dx.com/p/male-to-female-dupont-breadboard-jumper-wires-for-arduino-40-piece-pack-20cm-length-146935][Male-to-female jumper wires]]
- [[http://dx.com/p/arduino-compatible-breadboard-jumper-wires-8-20cm-68-cable-pack-142221][Male-to-male jumper wires]]
- [[http://dx.com/p/arduino-dupont-4-pin-female-to-female-extension-wire-cable-40cm-10-piece-pack-140526][Female-to-female jumper wires]]
- [[http://dx.com/p/single-row-40-pin-2-00mm-pitch-pin-headers-200-piece-pack-139825][Pin headers]] for soldering to a PCB
- [[http://dx.com/p/840-point-solderless-breadboard-118355][840-pin solderless breadboard]]. Comes with notches and grooves on the side, so that any number of similar breadboards can be fitten to form a longer and wider work area.
* Hardware I need to get

1. A GPS fence
2. A touch screen
3. Connectors to connect shields to the main board
4. A bluetooth shield
5. An FM radio shield
6. [[http://dx.com/p/new-version-pro-mini-atmega328p-microcontroller-board-white-173878][New Version Pro Mini Atmega328P Microcontroller Board - White]]
7. [[http://dx.com/p/efcom-pro-wireless-850-900-1800-1900mhz-gprs-gsm-module-w-antenna-white-173749][EFCom Pro Wireless 850/900/1800/1900MHz GPRS/GSM Module w/ Antenna - White]]
8. [[http://dx.com/p/jy-mcu-arduino-bluetooth-wireless-serial-port-module-104299][JY-MCU Arduino Bluetooth Wireless Serial Port Module]]
9. [[http://dx.com/p/usb-host-shield-2-0-board-166217][USB Host Shield 2.0 Board]]
10. [[http://dx.com/p/2-4ghz-nrf24l01-wireless-communication-module-for-arduino-green-2-pcs-149255][2.4GHz NRF24L01+ Wireless Communication Module for Arduino - Green (2 PCS)]]
11. [[http://dx.com/p/diy-colorful-lcd-shield-nokia-6100-expansion-board-white-171914][DIY Color LCD Shield Nokia 6100 Expansion Board - White]]
12. [[http://www.ebay.com/itm/130839929399?ssPageName=STRK:MEWNX:IT&_trksid=p3984.m1497.l2649][New Version Pro Mini Atmega328P Microcontroller Board - White]]

* Miscellaneous, unsorted, open questions
1. Connecting the Arduino board
   1. What buttons are on the board, and which ones can I control?
   2. How do I write to the equivalent of the console? --- something that can be recognized from the Arduino IDE.
2. Connecting the LCD keypad
   1. Recognising the buttons for press & release
   2. Writing bitmaps to the LCD
3. Connecting to the SD card
   1. What is the max file size?
   2. How many open files can one have simultaneously?
